<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Detail | ZAHAAM</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- ApexCharts -->
    <link href="https://cdn.jsdelivr.net/npm/apexcharts@3.40.0/dist/apexcharts.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/zahaam-styles.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
        }
        .navbar-brand {
            font-weight: 700;
        }
        .stock-header {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            padding: 20px;
        }
        .price-up {
            color: #198754;
        }
        .price-down {
            color: #dc3545;
        }
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        #chartContainer {
            height: 400px;
        }
        .stock-badge {
            font-size: 0.8rem;
            padding: 0.3rem 0.6rem;
            border-radius: var(--border-radius-pill);
            font-weight: 500;
        }
        .stock-badge-sector {
            background-color: rgba(33, 150, 243, 0.1);
            color: var(--info);
        }
        .stock-table th {
            font-weight: 600;
            color: var(--medium);
            font-size: 0.9rem;
        }
        .indicator-toggle {
            margin-right: 1rem;
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark navbar-zahaam">
    <div class="container">
        <a class="navbar-brand" href="index.html">ZAHAAM</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html" data-translate="home">Beranda</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="dashboard.html" data-translate="dashboard">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="stock-basic.html" data-translate="stocks">Saham</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="prediction.html" data-translate="ai_prediction">Prediksi AI</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="strategy.html" data-translate="trading_strategy">Strategi Trading</a>
                </li>
            </ul>
            <div class="d-flex align-items-center">
                <!-- Language Selector -->
                <div class="me-3">
                    <select id="languageSelector" class="form-select form-select-sm">
                        <option value="id">ID</option>
                        <option value="en">EN</option>
                    </select>
                </div>
                
                <div class="dark-mode-toggle me-3">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="slider"></span>
                </div>
                
                <a href="profile.html" class="btn btn-outline-light me-2">
                    <i class="bi bi-person-circle"></i> <span data-translate="profile">Profil</span>
                </a>
                <a href="#" class="btn btn-primary">
                    <i class="bi bi-box-arrow-in-right"></i> <span data-translate="login">Masuk</span>
                </a>
            </div>
        </div>
    </div>
</nav>

<div class="container py-4">
    <!-- Stock Header -->
    <div class="stock-header card">
        <div class="row">
            <div class="col-md-6">
                <h2 class="mb-0" id="stock-symbol">Loading...</h2>
                <h4 class="text-muted mb-0" id="stock-name">Loading...</h4>
                <p class="text-muted mb-2" id="stock-description"></p>
                <div class="d-flex align-items-center">
                    <span class="stock-badge stock-badge-sector me-2" id="stock-sector">Loading...</span>
                    <span class="badge bg-secondary">Banking</span>
                </div>
            </div>
            <div class="col-md-6 text-md-end">
                <h3 class="mb-1" id="current-price">Loading...</h3>
                <div class="price-change" id="price-change">
                    <div class="spinner-border spinner-border-sm" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
                <small class="text-muted" id="last-update">Loading data...</small>
            </div>
        </div>
    </div>
    
    <!-- Main Content Row 1: Price Chart full column -->
    <div class="row">
        <!-- Price Chart (full width) -->
        <div class="col-lg-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Price Chart</h5>
                    <div class="btn-group btn-group-sm" role="group">
                        <button type="button" class="btn btn-outline-primary active">1D</button>
                        <button type="button" class="btn btn-outline-primary">1W</button>
                        <button type="button" class="btn btn-outline-primary">1M</button>
                        <button type="button" class="btn btn-outline-primary">3M</button>
                        <button type="button" class="btn btn-outline-primary">1Y</button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="chartContainer"></div>
                    <div class="d-flex justify-content-end mt-2">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="sma20" checked>
                            <label class="form-check-label" for="sma20">SMA 20</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="sma50" checked>
                            <label class="form-check-label" for="sma50">SMA 50</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="volume">
                            <label class="form-check-label" for="volume">Volume</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="rsi">
                            <label class="form-check-label" for="rsi">RSI</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content Row 2: Technical Analysis and Info/Fundamental side by side -->
    <div class="row">
        <!-- Technical Analysis -->
        <div class="col-lg-8">
            <div class="card h-100 overflow-auto">
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="indicators-tab" data-bs-toggle="tab" data-bs-target="#indicators-content" type="button" role="tab" aria-controls="indicators-content" aria-selected="true">Indicators</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="motion-tab" data-bs-toggle="tab" data-bs-target="#motion-content" type="button" role="tab" aria-controls="motion-content" aria-selected="false">Motion</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="sentiment-tab" data-bs-toggle="tab" data-bs-target="#sentiment-content" type="button" role="tab" aria-controls="sentiment-content" aria-selected="false">News Sentiment</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="market-depth-tab" data-bs-toggle="tab" data-bs-target="#market-depth-content" type="button" role="tab" aria-controls="market-depth-content" aria-selected="false">Market Depth</button>
                        </li>
                    </ul>
                </div>
                <div class="card-body">
                    <div class="tab-content">
                        <!-- Technical Indicators Tab -->
                        <div class="tab-pane fade show active" id="indicators-content" role="tabpanel" aria-labelledby="indicators-tab">
                            <div class="row">
                                <div class="col-md-4 text-center mb-3">
                                    <h6>Overall Signal</h6>
                                    <div class="d-inline-block p-3 rounded-circle" id="overall-signal" style="background-color: #198754; color: white;">
                                        <h4 class="mb-0">BUY</h4>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <table class="table table-sm" id="indicator-table">
                                        <thead>
                                            <tr>
                                                <th>Indicator</th>
                                                <th>Value</th>
                                                <th>Signal</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>MA (20)</td>
                                                <td>4,525</td>
                                                <td><span class="badge bg-success">BUY</span></td>
                                            </tr>
                                            <tr>
                                                <td>MA (50)</td>
                                                <td>4,420</td>
                                                <td><span class="badge bg-success">BUY</span></td>
                                            </tr>
                                            <tr>
                                                <td>RSI (14)</td>
                                                <td>58.25</td>
                                                <td><span class="badge bg-warning text-dark">NEUTRAL</span></td>
                                            </tr>
                                            <tr>
                                                <td>MACD</td>
                                                <td>12.35</td>
                                                <td><span class="badge bg-success">BUY</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Motion Analysis Tab -->
                        <div class="tab-pane fade" id="motion-content" role="tabpanel" aria-labelledby="motion-tab">
                            <div class="row">
                                <div class="col-md-4 text-center mb-3">
                                    <h6>Trend Direction</h6>
                                    <div class="d-inline-block p-3 rounded-circle" id="trend-direction" style="background-color: #0dcaf0; color: white;">
                                        <h4 class="mb-0"><i class="bi bi-arrow-up"></i></h4>
                                    </div>
                                    <p class="mt-2" id="trend-strength">Strength: <span class="fw-bold">Medium</span></p>
                                </div>
                                <div class="col-md-8">
                                    <div class="mb-3">
                                        <h6 class="border-bottom pb-1">Support & Resistance</h6>
                                        <div id="support-resistance-data">
                                            <div class="d-flex justify-content-between">
                                                <span>Resistance 2:</span>
                                                <span class="fw-bold text-danger">4,850</span>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>Resistance 1:</span>
                                                <span class="fw-bold text-danger">4,720</span>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span class="fw-bold">Current Price:</span>
                                                <span class="fw-bold">4,650</span>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>Support 1:</span>
                                                <span class="fw-bold text-success">4,580</span>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>Support 2:</span>
                                                <span class="fw-bold text-success">4,450</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <h6 class="border-bottom pb-1">Price Action</h6>
                                        <div id="price-action-data">
                                            <div class="d-flex justify-content-between">
                                                <span>Pattern:</span>
                                                <span class="fw-bold">Bullish Flag</span>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>Momentum:</span>
                                                <span class="fw-bold text-success">Increasing</span>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <span>Volatility:</span>
                                                <span class="fw-bold">Medium</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- News Sentiment Tab -->
                        <div class="tab-pane fade" id="sentiment-content" role="tabpanel" aria-labelledby="sentiment-tab">
                            <div class="row">
                                <div class="col-md-4 text-center mb-3">
                                    <h6>Sentiment Score</h6>
                                    <div class="d-inline-block p-3 rounded-circle" id="sentiment-score-circle" style="background-color: #198754; color: white;">
                                        <h4 class="mb-0" id="sentiment-score-value">+0.65</h4>
                                    </div>
                                    <p class="mt-2">Confidence: <span class="fw-bold" id="sentiment-confidence">78%</span></p>
                                </div>
                                <div class="col-md-8">
                                    <div class="mb-3">
                                        <h6 class="border-bottom pb-1">Distribution</h6>
                                        <div class="sentiment-distribution mb-2">
                                            <div class="progress" style="height: 24px;">
                                                <div class="progress-bar bg-success" role="progressbar" style="width: 35%" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100">35%</div>
                                                <div class="progress-bar bg-info" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
                                                <div class="progress-bar bg-secondary" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">20%</div>
                                                <div class="progress-bar bg-warning" role="progressbar" style="width: 15%" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100">15%</div>
                                                <div class="progress-bar bg-danger" role="progressbar" style="width: 5%" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100">5%</div>
                                            </div>
                                            <div class="d-flex justify-content-between mt-1">
                                                <span class="small">Very Positive</span>
                                                <span class="small">Very Negative</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <h6 class="border-bottom pb-1">Recent News Impact</h6>
                                        <div id="news-impact-container">
                                            <div class="news-impact-item mb-2 p-2 border-start border-4 border-success">
                                                <h6 class="small fw-bold mb-1">Strong Quarterly Results</h6>
                                                <p class="small mb-0">Company exceeded analyst expectations with 15% revenue growth</p>
                                                <div class="d-flex justify-content-between mt-1">
                                                    <span class="small text-muted">2 days ago</span>
                                                    <span class="badge bg-success">+0.85</span>
                                                </div>
                                            </div>
                                            <div class="news-impact-item mb-2 p-2 border-start border-4 border-warning">
                                                <h6 class="small fw-bold mb-1">New Product Launch</h6>
                                                <p class="small mb-0">Market reception mixed on innovative but unproven technology</p>
                                                <div class="d-flex justify-content-between mt-1">
                                                    <span class="small text-muted">5 days ago</span>
                                                    <span class="badge bg-warning text-dark">+0.12</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Market Depth Tab -->
                        <div class="tab-pane fade" id="market-depth-content" role="tabpanel" aria-labelledby="market-depth-tab">
                            <div class="row">
                                <div class="col-12">
                                    <div class="d-flex justify-content-end mb-2">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="realTimeDepth">
                                            <label class="form-check-label" for="realTimeDepth">Real-time</label>
                                        </div>
                                    </div>
                                    <div id="marketDepthChart" style="height: 300px;"></div>
                                    <div class="d-flex justify-content-between mt-3">
                                        <div class="small text-muted">Bid Volume: <span class="fw-bold">25.8M</span></div>
                                        <div class="small text-muted">Ask Volume: <span class="fw-bold">18.2M</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Combined Stock Information and Fundamental Data with tabs -->
        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info-content" type="button" role="tab" aria-controls="info-content" aria-selected="true">Info</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="fundamental-tab" data-bs-toggle="tab" data-bs-target="#fundamental-content" type="button" role="tab" aria-controls="fundamental-content" aria-selected="false">Fundamental</button>
                        </li>
                    </ul>
                </div>
                <div class="card-body tab-content">
                    <!-- Stock Information Tab Content -->
                    <div class="tab-pane fade show active" id="info-content" role="tabpanel" aria-labelledby="info-tab">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>Previous Close</td>
                                    <td class="text-end">4,545</td>
                                </tr>
                                <tr>
                                    <td>Open</td>
                                    <td class="text-end">4,550</td>
                                </tr>
                                <tr>
                                    <td>Day's Range</td>
                                    <td class="text-end">4,520 - 4,585</td>
                                </tr>
                                <tr>
                                    <td>52 Week Range</td>
                                    <td class="text-end">4,100 - 4,750</td>
                                </tr>
                                <tr>
                                    <td>Volume</td>
                                    <td class="text-end">25,450,200</td>
                                </tr>
                                <tr>
                                    <td>Market Cap</td>
                                    <td class="text-end">556.23T</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Fundamental Data Tab Content -->
                    <div class="tab-pane fade" id="fundamental-content" role="tabpanel" aria-labelledby="fundamental-tab">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>P/E Ratio</td>
                                    <td class="text-end">15.42</td>
                                </tr>
                                <tr>
                                    <td>EPS</td>
                                    <td class="text-end">297.01</td>
                                </tr>
                                <tr>
                                    <td>Dividend Yield</td>
                                    <td class="text-end">3.25%</td>
                                </tr>
                                <tr>
                                    <td>ROE</td>
                                    <td class="text-end">18.75%</td>
                                </tr>
                                <tr>
                                    <td>Revenue (TTM)</td>
                                    <td class="text-end">125.7T</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-lg-12">
            <!-- Trading Signals -->
            <div class="card mt-4">
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs" id="signalTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="signals-tab" data-bs-toggle="tab" data-bs-target="#signals-content" type="button" role="tab">Trading Signals</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="timeframe-tab" data-bs-toggle="tab" data-bs-target="#timeframe-content" type="button" role="tab">Multi-Timeframe Prediction</button>
                        </li>
                    </ul>
                </div>
                <div class="card-body tab-content">
                    <div class="tab-pane fade show active" id="signals-content" role="tabpanel">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="signal-card entry-signal p-3 mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="text-success mb-0"><i class="bi bi-arrow-right-circle me-2"></i> Entry Signal</h6>
                                    <span class="badge bg-success">BUY</span>
                                </div>
                                <div>
                                    <small class="text-muted">Entry Price:</small>
                                    <div class="current-price" id="current-price">Loading...</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">Signal Strength:</small>
                                    <div class="d-flex align-items-center">
                                        <div class="progress flex-grow-1 me-2" style="height: 6px;">
                                            <div class="progress-bar bg-success" style="width: 85%"></div>
                                        </div>
                                        <small>85%</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="signal-card exit-signal p-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="text-danger mb-0"><i class="bi bi-arrow-left-circle me-2"></i> Exit Strategy</h6>
                                    <span class="badge bg-danger">Rp 4,720</span>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <small class="text-muted">Stop Loss:</small>
                                        <div class="text-danger">Rp 4,460</div>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Risk/Reward:</small>
                                        <div class="fw-bold">1:2.3</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Signal Explanation -->
                    <div class="signal-explanation">
                        <h6 class="border-bottom pb-2 mb-3">Signal Analysis & Explanation</h6>
                        <p class="small mb-2">Bank Rakyat Indonesia (BBRI) is showing bullish momentum with a break above the resistance level at 4,550. The stock has formed a golden cross pattern with the 20-day moving average crossing above the 50-day moving average, indicating strong upward momentum.</p>
                        <p class="small mb-2">Volume analysis shows accumulation during recent upward price movements, suggesting institutional buying interest. The RSI at 58.25 indicates moderate strength without being overbought.</p>
                        <p class="small">The current price action shows a consolidation near previous resistance, which now acts as support. Look for continued buying pressure and potential movement toward the next resistance level at 4,720.</p>
                    </div>
                    </div>
                    
                    <!-- Multi-Timeframe Prediction Tab -->
                    <div class="tab-pane fade" id="timeframe-content" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0">AI-Powered Price Predictions</h5>
                            <button id="refreshStockPredictions" class="btn btn-sm btn-primary">
                                <i class="bi bi-arrow-clockwise"></i> Refresh
                            </button>
                        </div>
                        <p class="text-muted small mb-4">Prediksi harga saham menggunakan machine learning di berbagai timeframe</p>
                        
                        <!-- Prediction Tabs -->
                        <ul class="nav nav-pills mb-3" id="stock-prediction-timeframes" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="stock-hour1-tab" data-bs-toggle="pill" data-bs-target="#stock-hour1-content" type="button" role="tab">1 Jam</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="stock-hour3-tab" data-bs-toggle="pill" data-bs-target="#stock-hour3-content" type="button" role="tab">3 Jam</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="stock-hour24-tab" data-bs-toggle="pill" data-bs-target="#stock-hour24-content" type="button" role="tab">24 Jam</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="stock-day7-tab" data-bs-toggle="pill" data-bs-target="#stock-day7-content" type="button" role="tab">7 Hari</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="stock-day30-tab" data-bs-toggle="pill" data-bs-target="#stock-day30-content" type="button" role="tab">30 Hari</button>
                            </li>
                        </ul>
                        
                        <!-- Prediction Tab Contents -->
                        <div class="tab-content" id="stock-prediction-timeframes-content">
                            <!-- Loading Indicator -->
                            <div id="stockPredictionLoadingIndicator" class="text-center py-5">
                                <div class="spinner-zahaam mb-3"></div>
                                <p class="text-muted">Loading prediction data...</p>
                            </div>
                            
                            <!-- 1 Hour Prediction -->
                            <div class="tab-pane fade show active" id="stock-hour1-content" role="tabpanel">
                                <div class="chart-container" style="position: relative; height: 250px;">
                                    <div id="stock-hour1-chart"></div>
                                </div>
                                <div class="row mt-3 mb-2" id="stock-hour1-metrics">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                            
                            <!-- 3 Hours Prediction -->
                            <div class="tab-pane fade" id="stock-hour3-content" role="tabpanel">
                                <div class="chart-container" style="position: relative; height: 250px;">
                                    <div id="stock-hour3-chart"></div>
                                </div>
                                <div class="row mt-3 mb-2" id="stock-hour3-metrics">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                            
                            <!-- 24 Hours Prediction -->
                            <div class="tab-pane fade" id="stock-hour24-content" role="tabpanel">
                                <div class="chart-container" style="position: relative; height: 250px;">
                                    <div id="stock-hour24-chart"></div>
                                </div>
                                <div class="row mt-3 mb-2" id="stock-hour24-metrics">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                            
                            <!-- 7 Days Prediction -->
                            <div class="tab-pane fade" id="stock-day7-content" role="tabpanel">
                                <div class="chart-container" style="position: relative; height: 250px;">
                                    <div id="stock-day7-chart"></div>
                                </div>
                                <div class="row mt-3 mb-2" id="stock-day7-metrics">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                            
                            <!-- 30 Days Prediction -->
                            <div class="tab-pane fade" id="stock-day30-content" role="tabpanel">
                                <div class="chart-container" style="position: relative; height: 250px;">
                                    <div id="stock-day30-chart"></div>
                                </div>
                                <div class="row mt-3 mb-2" id="stock-day30-metrics">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Prediction Comparison -->
                        <div class="card mt-4">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">Multi-Timeframe Analysis</h6>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-sm table-bordered" id="stock-prediction-comparison-table">
                                        <thead>
                                            <tr>
                                                <th>Timeframe</th>
                                                <th>Predicted Price</th>
                                                <th>Change %</th>
                                                <th>Signal</th>
                                                <th>Confidence</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Will be populated by JS -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                        
                        <div class="mt-3 pt-2 border-top">
                            <h6 class="mb-3">Signal Performance History</h6>
                            <div class="d-flex align-items-center mb-3">
                                <div style="width: 100px;">
                                    <div class="d-flex justify-content-between small">
                                        <span>Accuracy</span>
                                        <span class="fw-bold">78%</span>
                                    </div>
                                    <div class="progress" style="height: 6px;">
                                        <div class="progress-bar bg-success" style="width: 78%"></div>
                                    </div>
                                </div>
                                <div class="ms-4" style="width: 100px;">
                                    <div class="d-flex justify-content-between small">
                                        <span>Avg. Return</span>
                                        <span class="fw-bold">4.2%</span>
                                    </div>
                                    <div class="progress" style="height: 6px;">
                                        <div class="progress-bar bg-primary" style="width: 42%"></div>
                                    </div>
                                </div>
                                <div class="ms-4" style="width: 100px;">
                                    <div class="d-flex justify-content-between small">
                                        <span>Win/Loss</span>
                                        <span class="fw-bold">3.5</span>
                                    </div>
                                    <div class="progress" style="height: 6px;">
                                        <div class="progress-bar bg-info" style="width: 70%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sidebar -->
        <div class="col-lg-4">
            

            
            <!-- Related News -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Recent News</h5>
                </div>
                <div class="card-body p-0">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <h6 class="mb-1">BRI Posts 12.8% Growth in Q1 2025 Profit</h6>
                            <small class="text-muted">May 28, 2025</small>
                            <p class="mb-0 small">Bank Rakyat Indonesia reported a 12.8% increase in first-quarter profit driven by strong credit growth...</p>
                        </li>
                        <li class="list-group-item">
                            <h6 class="mb-1">BRI Expands Digital Banking Initiative</h6>
                            <small class="text-muted">May 25, 2025</small>
                            <p class="mb-0 small">BRI launches new mobile banking features to enhance customer experience and digital transactions...</p>
                        </li>
                        <li class="list-group-item">
                            <h6 class="mb-1">BRI Distributes Rp 20.2T in Dividends</h6>
                            <small class="text-muted">May 20, 2025</small>
                            <p class="mb-0 small">BRI's shareholders approved a dividend payout of Rp 20.2 trillion for the 2024 financial year...</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Price History Section -->
    <div class="row mt-4">
        <div class="col-12">
            <div id="historySummary"><!-- Will be populated by JS --></div>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-12">
            <div id="historyTableContainer">
                <!-- Will be populated by JS -->
                <div class="spinner-container">
                    <div class="spinner-zahaam"></div>
                    <p class="text-muted mt-3">Fetching stock history data from Yahoo Finance...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer py-4 mt-5">
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-4 mb-md-0">
                <div class="d-flex align-items-center mb-3">
                    <h4 class="mb-0 me-2">ZAHAAM</h4>
                    <span class="badge bg-primary">Beta</span>
                </div>
                <p class="text-muted mb-3" data-translate="advanced_stock_platform">Platform Analisis & Prediksi Saham Tingkat Lanjut yang didukung oleh teknologi machine learning dan AI.</p>
                <div class="social-icons">
                    <a href="#" class="me-3"><i class="bi bi-twitter"></i></a>
                    <a href="#" class="me-3"><i class="bi bi-linkedin"></i></a>
                    <a href="#" class="me-3"><i class="bi bi-github"></i></a>
                    <a href="#"><i class="bi bi-envelope-fill"></i></a>
                </div>
            </div>
            <div class="col-md-2 col-6 mb-4 mb-md-0">
                <h6 class="fw-bold mb-3" data-translate="platform">Platform</h6>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="index.html" class="footer-link"><i class="bi bi-house-door me-2"></i><span data-translate="home">Beranda</span></a></li>
                    <li class="mb-2"><a href="dashboard.html" class="footer-link"><i class="bi bi-grid-1x2 me-2"></i><span data-translate="dashboard">Dashboard</span></a></li>
                    <li class="mb-2"><a href="stock-basic.html" class="footer-link"><i class="bi bi-graph-up me-2"></i><span data-translate="stocks">Saham</span></a></li>
                    <li class="mb-2"><a href="prediction.html" class="footer-link"><i class="bi bi-magic me-2"></i><span data-translate="predictions">Prediksi</span></a></li>
                </ul>
            </div>
            <div class="col-md-2 col-6 mb-4 mb-md-0">
                <h6 class="fw-bold mb-3" data-translate="resources">Sumber Daya</h6>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="#" class="footer-link"><i class="bi bi-journal-text me-2"></i><span data-translate="docs">Dokumentasi</span></a></li>
                    <li class="mb-2"><a href="#" class="footer-link"><i class="bi bi-code-slash me-2"></i>API</a></li>
                    <li class="mb-2"><a href="#" class="footer-link"><i class="bi bi-mortarboard me-2"></i><span data-translate="learn">Pembelajaran</span></a></li>
                    <li class="mb-2"><a href="#" class="footer-link"><i class="bi bi-question-circle me-2"></i><span data-translate="help">Bantuan</span></a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <h6 class="fw-bold mb-3" data-translate="subscribe_newsletter">Berlangganan Newsletter</h6>
                <p class="text-muted small mb-3" data-translate="get_updates">Dapatkan update mingguan tentang wawasan pasar dan fitur platform ZAHAAM.</p>
                <form>
                    <div class="input-group mb-3">
                        <input type="email" class="form-control" placeholder="Alamat email Anda" data-translate="your_email" aria-label="Email">
                        <button class="btn btn-primary" type="button" data-translate="subscribe">Berlangganan</button>
                    </div>
                </form>
            </div>
        </div>
        <hr class="my-4">
        <div class="row align-items-center">
            <div class="col-md-6 text-center text-md-start">
                <p class="small text-muted mb-0">© 2025 ZAHAAM. <span data-translate="all_rights_reserved">Hak cipta dilindungi undang-undang.</span></p>
            </div>
            <div class="col-md-6 text-center text-md-end">
                <ul class="list-inline mb-0">
                    <li class="list-inline-item"><a href="#" class="footer-link small" data-translate="privacy_policy">Kebijakan Privasi</a></li>
                    <li class="list-inline-item">•</li>
                    <li class="list-inline-item"><a href="#" class="footer-link small" data-translate="terms_of_service">Ketentuan Layanan</a></li>
                    <li class="list-inline-item">•</li>
                    <li class="list-inline-item"><a href="#" class="footer-link small" data-translate="sitemap">Peta Situs</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<!-- Footer Styling -->
<style>
    /* Footer Styling */
    .footer {
        background-color: #f8f9fa;
        border-top: 1px solid #e9ecef;
        color: #212529;
    }
    
    .footer-link {
        color: #495057;
        text-decoration: none;
        transition: color 0.3s ease;
    }
    
    .footer-link:hover {
        color: #3a7bd5;
        text-decoration: none;
    }
</style>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.40.0/dist/apexcharts.min.js"></script>
<script src="js/jquery.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/stocks-data.js"></script>
<script src="js/api-service.js"></script>
<script src="js/stock-history.js"></script>
<script src="js/config.js"></script>
<script src="js/stock-multi-timeframe.js"></script>
<script src="js/advanced-analysis.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Variables to store chart and stock data
        let chart;
        let chartData = {};
        
        // Function to create and render chart from historical data
        function renderStockChart(symbol, historyData) {
            // Process history data into chart format
            const processedData = processChartData(historyData, symbol);
            chartData = processedData;
            
            // Chart options
            const options = {
                series: [{
                    name: symbol,
                    type: 'candlestick',
                    data: processedData.dates.map((date, i) => ({
                        x: new Date(date),
                        y: processedData.ohlc[i]
                    }))
                }, {
                    name: 'SMA 20',
                    type: 'line',
                    data: processedData.dates.map((date, i) => ({
                        x: new Date(date),
                        y: processedData.sma20[i]
                    }))
                }, {
                    name: 'SMA 50',
                    type: 'line',
                    data: processedData.dates.map((date, i) => ({
                        x: new Date(date),
                        y: processedData.sma50[i]
                    }))
                }],
                chart: {
                    height: 400,
                    type: 'candlestick',
                    toolbar: {
                        show: true,
                        tools: {
                            download: true,
                            selection: true,
                            zoom: true,
                            zoomin: true,
                            zoomout: true,
                            pan: true,
                            reset: true
                        }
                    }
                },
                title: {
                    text: `${symbol} Stock Price`,
                    align: 'left'
                },
                xaxis: {
                    type: 'datetime'
                },
                yaxis: {
                    tooltip: {
                        enabled: true
                    }
                },
                colors: ['#000', '#2196F3', '#FFA500'],
                stroke: {
                    width: [1, 2, 2]
                }
            };
            
            // Create and render chart
            chart = new ApexCharts(document.querySelector('#chartContainer'), options);
            chart.render();
        }
        
        // Process history data for chart
        function processChartData(historyData, symbol) {
            const dates = [];
            const ohlc = [];
            const volume = [];
            const closing = [];
            
            // Sort data by date ascending
            historyData.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            // Extract data for chart
            historyData.forEach(item => {
                dates.push(item.date);
                ohlc.push([item.open, item.high, item.low, item.close]);
                volume.push(item.volume);
                closing.push(item.close);
            });
            
            // Calculate simple moving averages (dummy for now)
            // In a real app, these would be calculated properly
            const sma20 = closing.map((_, i) => {
                if (i < 19) return null;
                const slice = closing.slice(i - 19, i + 1);
                return slice.reduce((sum, val) => sum + val, 0) / 20;
            });
            
            const sma50 = closing.map((_, i) => {
                if (i < 49) return null;
                const slice = closing.slice(i - 49, i + 1);
                return slice.reduce((sum, val) => sum + val, 0) / 50;
            });
            
            return { dates, ohlc, volume, sma20, sma50 };
        }
        
        // Toggle indicators
        function setupChartControls() {
            document.querySelector('#sma20').addEventListener('change', function() {
                if (this.checked) {
                    chart.showSeries('SMA 20');
                } else {
                    chart.hideSeries('SMA 20');
                }
            });
            
            document.querySelector('#sma50').addEventListener('change', function() {
                if (this.checked) {
                    chart.showSeries('SMA 50');
                } else {
                    chart.hideSeries('SMA 50');
                }
            });
        }
        
        // Add dark mode toggle functionality
        const setupDarkMode = () => {
            const darkModeToggle = document.createElement('div');
            darkModeToggle.className = 'dark-mode-toggle me-3';
            darkModeToggle.innerHTML = `
                <input type="checkbox" id="darkModeToggle">
                <span class="slider"></span>
            `;
            
            // Insert before the Profile button
            const navButtons = document.querySelector('.navbar .d-flex');
            navButtons.prepend(darkModeToggle);
            
            // Check for saved dark mode preference
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeToggle').checked = true;
            }
            
            // Dark mode toggle event listener
            document.getElementById('darkModeToggle').addEventListener('change', function() {
                if (this.checked) {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('darkMode', 'enabled');
                } else {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('darkMode', 'disabled');
                }
            });
        };
        
        setupDarkMode();
        setupChartControls();
        
        // Get stock symbol from URL
        const urlParams = new URLSearchParams(window.location.search);
        const stockSymbol = urlParams.get('symbol') || 'BBRI';
        
        // Update page title and header with stock symbol
        document.title = `${stockSymbol} - Stock Detail | ZAHAAM`;
        
        // Update stock symbol in header - using correct ID selector
        const symbolElement = document.getElementById('stock-symbol');
        if (symbolElement) {
            symbolElement.textContent = stockSymbol;
        }
        
        // Update header data using data from stocks-data.js (indonesianStocks)
        
        // Function to get stock data from indonesianStocks array
        const getStockDataFromIndStocks = (symbol) => {
            // Check if indonesianStocks is defined
            if (typeof indonesianStocks === 'undefined' || !Array.isArray(indonesianStocks)) {
                console.error('indonesianStocks data not available');
                return {
                    name: 'Unknown Company',
                    sector: 'Unknown Sector',
                    description: `${symbol} - Information not available`
                };
            }
            
            // Find stock in indonesianStocks array
            const stock = indonesianStocks.find(item => item.code === symbol);
            
            // If found, return the data, otherwise return default
            if (stock) {
                return {
                    name: stock.name || 'Unknown Company',
                    sector: stock.sector || 'Unknown Sector',
                    description: `${stock.name} (${symbol})`
                };
            } else {
                console.warn(`Stock data for ${symbol} not found in indonesianStocks`);
                return {
                    name: 'Unknown Company',
                    sector: 'Unknown Sector',
                    description: `${symbol} - Information not available`
                };
            }
        };
        
        // Get stock data using the new function
        const currentStock = getStockDataFromIndStocks(stockSymbol);
        
        // Update company name
        const nameElement = document.getElementById('stock-name');
        if (nameElement) {
            nameElement.textContent = currentStock.name;
        }
        
        // Update company sector
        const sectorElement = document.getElementById('stock-sector');
        if (sectorElement) {
            sectorElement.textContent = currentStock.sector;
        }
        
        // Update company description
        const descriptionElement = document.getElementById('stock-description');
        if (descriptionElement) {
            descriptionElement.textContent = currentStock.description;
        }
        
        // Fetch and display stock history, then update chart
        fetchStockHistory(stockSymbol, '1mo').then(historyData => {
            if (historyData) {
                // Process data for chart and render it
                renderStockChart(stockSymbol, historyData);
                
                // Also update the current price and other header information if available
                if (historyData.length > 0) {
                    const latestData = historyData[0]; // Most recent data point
                    
                    // Update all price elements with ID selectors
                    const priceElements = document.querySelectorAll('#current-price');
                    priceElements.forEach(element => {
                        element.textContent = `Rp ${formatNumber(latestData.close)}`;
                    });
                    
                    // Update change element with ID selector
                    const changeElement = document.getElementById('price-change');
                    if (changeElement) {
                        const priceChange = latestData.close - latestData.open;
                        const priceChangePercent = (priceChange / latestData.open) * 100;
                        const changeClass = priceChange >= 0 ? 'price-up' : 'price-down';
                        const changeIcon = priceChange >= 0 ? 'bi-caret-up-fill' : 'bi-caret-down-fill';
                        
                        changeElement.className = `price-change ${changeClass}`;
                        changeElement.innerHTML = `
                            <i class="bi ${changeIcon}"></i> ${priceChange >= 0 ? '+' : ''}${priceChange.toFixed(0)} (${Math.abs(priceChangePercent).toFixed(2)}%)
                        `;
                    }
                    
                    // Update last update timestamp
                    const lastUpdateElement = document.getElementById('last-update');
                    if (lastUpdateElement) {
                        const now = new Date();
                        const dateStr = now.toLocaleDateString('id-ID', {
                            day: 'numeric',
                            month: 'long',
                            year: 'numeric'
                        });
                        const timeStr = now.toLocaleTimeString('id-ID', {
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                        lastUpdateElement.textContent = `Last update: ${dateStr} ${timeStr}`;
                    }
                }
            }
        });
    });
</script>

</body>
</html>
